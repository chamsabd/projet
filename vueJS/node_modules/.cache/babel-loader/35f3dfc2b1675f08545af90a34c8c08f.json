{"ast":null,"code":"import \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from \"axios\";\nimport DataTable from \"vue-materialize-datatable\";\nimport FormationDetails from './FormationDetails.vue'; //import ArchiverItem from \"@/components/ArchiverItem\";\n\nimport AddDemande from \"@/components/demande/addDemande.vue\";\nimport AfficherDemandes from \"@/components/demande/afficherDemandes.vue\";\nexport default {\n  name: \"ListerFormations\",\n  components: {\n    //  ArchiverItem,\n    datatable: DataTable,\n    FormationDetails: FormationDetails,\n    AddDemande: AddDemande,\n    AfficherDemandes: AfficherDemandes\n  },\n  props: {\n    formations: Array,\n    role: String //  d:Object,\n\n  },\n  data: function data() {\n    return {\n      d: {},\n      //demandes:[],\n      tableColumns1: [{\n        label: \"titre de formation\",\n        field: \"titre\",\n        numeric: false,\n        html: false\n      }, {\n        label: \"date debut\",\n        field: \"date_debut\",\n        numeric: true,\n        html: false\n      }, {\n        label: \"description\",\n        field: function f(fo) {\n          if (fo.description) {\n            return fo.description.toString().substring(0, 20) + \"…\";\n          } else {\n            return \"pas de description\";\n          }\n        },\n        numeric: false,\n        html: false\n      }],\n      formation: {}\n    };\n  },\n  computed: {\n    customButtons: function customButtons() {\n      return this.role == 'admin' ? [{\n        hide: false,\n        // Whether to hide the button\n        icon: \"add\",\n        // Materialize icon\n        onclick: this.onAddClick // Click handler\n\n      }] : [];\n    }\n  },\n  methods: {\n    onAddClick: function onAddClick() {\n      this.showModal(\"add-modal\");\n    },\n    showModal: function showModal(id) {\n      this.$bvModal.show(id); // this.$refs[id].show()\n    },\n    hideModal: function hideModal(id) {\n      this.$bvModal.hide(id); // this.$refs[id].show()\n    },\n    onRowClick: function onRowClick(row) {\n      this.formation = row;\n      console.log(this.formation);\n      this.showModal(\"my-modal\");\n    },\n    deleteitm: function deleteitm(id) {\n      var _this = this;\n\n      axios.delete(\"http://127.0.0.1:8000/api/formation/\" + id).then(function (response) {\n        if (response.data == true) _this.getformations();\n      }).catch(function (error) {\n        return console.log(error.response);\n      });\n    },\n    getDemandeByFormation: function getDemandeByFormation(id) {\n      var _this2 = this;\n\n      console.log(id); // var demande={};\n      //     demande.formation_id=this.d.row.id;\n      //   axios(\n      //   {   url: 'http://127.0.0.1:8000/api/demandes/'+id,\n      //         method: 'get',\n      //         data: demande,\n      //       })\n      //   .then((response) => {\n      //     console.log(response);\n      //     })\n\n      axios.get(\"http://127.0.0.1:8000/api/demandes/formation/\" + id).then(function (response) {\n        _this2.d = response.data;\n        console.log(_this2.d);\n        window.location.href = '/demande';\n      }).catch(function (error) {\n        return console.log(error.response);\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA;AAEA;AACA,sD,CACA;;AACA;AACA;AAGA;AACAA,0BADA;AAEAC;AACA;AAEAC,wBAHA;AAIAC,sCAJA;AAKAC,0BALA;AAMAC;AANA,GAFA;AAUAC;AACAC,qBADA;AAEAC,gBAFA,CAGA;;AAHA,GAVA;AAeAC;AACA;AACAC,WADA;AAEA;AAEAC,sBACA;AACAC,mCADA;AAEAC,sBAFA;AAGAC,sBAHA;AAIAC;AAJA,OADA,EAOA;AACAH,2BADA;AAEAC,2BAFA;AAGAC,qBAHA;AAIAC;AAJA,OAPA,EAaA;AACAH,4BADA;AAEAC;AACA;AACA;AACA,WAFA,MAEA;AACA;AACA;AACA,SARA;AASAC,sBATA;AAUAC;AAVA,OAbA,CAJA;AAgCAC;AAhCA;AAkCA,GAlDA;AAmDAC;AACAC,iBADA,2BACA;AACA,oCACA,CACA;AACAC,mBADA;AACA;AACAC,mBAFA;AAEA;AACAC,gCAHA,CAGA;;AAHA,OADA,CADA,GAQA,EARA;AASA;AAXA,GAnDA;AAgEAC;AAEAC,cAFA,wBAEA;AAEA;AACA,KALA;AAMAC,aANA,qBAMAC,EANA,EAMA;AACA,6BADA,CAEA;AACA,KATA;AASAC,aATA,qBASAD,EATA,EASA;AACA,6BADA,CAEA;AACA,KAZA;AAaAE,cAbA,sBAaAC,GAbA,EAaA;AACA;AACAC;AACA;AACA,KAjBA;AAmBAC,aAnBA,qBAmBAL,EAnBA,EAmBA;AAAA;;AACAM,YACAC,MADA,CACA,2CADA,EAEAC,IAFA,CAEA;AACA;AACA,OAJA,EAKAC,KALA,CAKA;AAAA;AAAA,OALA;AAMA,KA1BA;AA4BAC,yBA5BA,iCA4BAV,EA5BA,EA4BA;AAAA;;AACAI,sBADA,CAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AACAE,sEACAE,IADA,CACA;AACA;AACAJ;AACAO;AACA,OALA,EAMAF,KANA,CAMA;AAAA;AAAA,OANA;AAOA;AAjDA;AAhEA","names":["name","components","datatable","FormationDetails","AddDemande","AfficherDemandes","props","formations","role","data","d","tableColumns1","label","field","numeric","html","formation","computed","customButtons","hide","icon","onclick","methods","onAddClick","showModal","id","hideModal","onRowClick","row","console","deleteitm","axios","delete","then","catch","getDemandeByFormation","window"],"sourceRoot":"src/components/formation","sources":["ListerFormation.vue"],"sourcesContent":["<template>\r\n  <div id=\"app\"  class=\"container\">\r\n    \r\n\r\n    <datatable\r\n      title=\"formations\"\r\n      :customButtons=\"customButtons\"\r\n      :columns=\"tableColumns1\"\r\n      :rows=\"formations\"\r\n     \r\n    >\r\n      <th slot=\"thead-tr\">Etat</th>\r\n      <th slot=\"thead-tr\">Actions</th>\r\n\r\n      <template slot=\"tbody-tr\" slot-scope=\"props\">\r\n        <td>\r\n          <b-button v-if=\"props.row.etat == 0\" pill variant=\"outline-success\"\r\n            >overte</b-button\r\n          >\r\n          <b-button v-else pill variant=\"outline-danger\">fermer</b-button>\r\n        </td>\r\n        <td>\r\n          <b-button pill variant=\"outline-info\" @click=\"onRowClick(props.row)\">details</b-button>\r\n         <b-button pill variant=\"outline-warning\" :d=\"d\" @click=\"getDemandeByFormation(props.row.id)\">afficher demandes</b-button>\r\n        </td>\r\n        <td>  \r\n             <b-button v-if=\"'participant'==0\" pill variant=\"outline-warning\">send demande</b-button>\r\n          <add-demande :f=\"props\" /></td>\r\n      </template>\r\n    </datatable>\r\n      <b-modal  id=\"my-modal\" size=\"lg\" title=\"add formation\"  centered ok-only>\r\n          <formation-details :formation=\"formation\"/>\r\n   \r\n       </b-modal>\r\n       <afficherDemandes :d=\"d\"/>\r\n  </div>\r\n         \r\n\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\n\r\nimport DataTable from \"vue-materialize-datatable\";\r\nimport FormationDetails from './FormationDetails.vue';\r\n//import ArchiverItem from \"@/components/ArchiverItem\";\r\nimport AddDemande from \"@/components/demande/addDemande.vue\";\r\nimport AfficherDemandes from \"@/components/demande/afficherDemandes.vue\";\r\n\r\n\r\nexport default {\r\n  name: \"ListerFormations\",\r\n  components: {\r\n    //  ArchiverItem,\r\n\r\n    datatable: DataTable,\r\n    FormationDetails,\r\n    AddDemande,\r\n    AfficherDemandes,\r\n  },\r\n  props: {\r\n  formations:Array,\r\n  role:String,\r\n  //  d:Object,\r\n  },\r\n  data: function () {\r\n    return {\r\n     d:{},\r\n      //demandes:[],\r\n\r\n      tableColumns1: [\r\n        {\r\n          label: \"titre de formation\",\r\n          field: \"titre\",\r\n          numeric: false,\r\n          html: false,\r\n        },\r\n        {\r\n          label: \"date debut\",\r\n          field: \"date_debut\",\r\n          numeric: true,\r\n          html: false,\r\n        },\r\n        {\r\n          label: \"description\",\r\n          field: function f(fo) {\r\n            if (fo.description) {\r\n              return fo.description.toString().substring(0, 20) + \"…\";\r\n            } else {\r\n              return \"pas de description\";\r\n            }\r\n          },\r\n          numeric: false,\r\n          html: false,\r\n        },\r\n      ],\r\n\r\n    \r\n      formation: {},\r\n    };\r\n  },\r\n  computed: {\r\n    customButtons() {\r\n      return this.role == 'admin'\r\n        ? [\r\n            {\r\n              hide: false, // Whether to hide the button\r\n              icon: \"add\", // Materialize icon\r\n              onclick: this.onAddClick, // Click handler\r\n            },\r\n          ]\r\n        : [];\r\n    },\r\n  },\r\n  methods: {\r\n  \r\n    onAddClick() {\r\n    \r\n      this.showModal(\"add-modal\");\r\n    },\r\n    showModal(id) {\r\n      this.$bvModal.show(id);\r\n      // this.$refs[id].show()\r\n    }, hideModal(id) {\r\n      this.$bvModal.hide(id);\r\n      // this.$refs[id].show()\r\n    },\r\n    onRowClick(row) {\r\n      this.formation = row;\r\n      console.log(this.formation);\r\n      this.showModal(\"my-modal\");\r\n    },\r\n\r\n    deleteitm(id) {\r\n      axios\r\n        .delete(\"http://127.0.0.1:8000/api/formation/\" + id)\r\n        .then((response) => {\r\n          if (response.data == true) this.getformations();\r\n        })\r\n        .catch((error) => console.log(error.response));\r\n    },\r\n\r\n    getDemandeByFormation(id){\r\n      console.log(id);\r\n    // var demande={};\r\n    //     demande.formation_id=this.d.row.id;\r\n        \r\n    //   axios(\r\n    //   {   url: 'http://127.0.0.1:8000/api/demandes/'+id,\r\n    //         method: 'get',\r\n    //         data: demande,\r\n    //       })\r\n    //   .then((response) => {\r\n    //     console.log(response);\r\n          \r\n    //     })\r\n    axios.get(\"http://127.0.0.1:8000/api/demandes/formation/\" +id)\r\n    .then((response) => {\r\n      this.d = response.data;\r\n      console.log(this.d);\r\n      window.location.href = '/demande';\r\n    })\r\n    .catch((error) => console.log(error.response));\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n@import \"~material-design-icons-iconfont/dist/material-design-icons\";\r\n</style>"]},"metadata":{},"sourceType":"module"}
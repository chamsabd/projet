{"ast":null,"code":"import _asyncToGenerator from \"D:/safe_dsi21/dsi21/semestre2/PROJET_2/projet/vueJS/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"regenerator-runtime/runtime.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.array.map.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from \"axios\";\nexport default {\n  name: \"AddFormation\",\n  data: function data() {\n    var now = new Date();\n    return {\n      today: new Date(now.getFullYear(), now.getMonth(), now.getDate()),\n      users: [],\n      errors: [],\n      formation: {\n        'titre': null,\n        'nbr_place': null,\n        'description': null,\n        'date_debut': null,\n        'responsable_id': null,\n        'date_fin': null\n      }\n    };\n  },\n  mounted: function mounted() {\n    this.getutilisateurs();\n  },\n  methods: {\n    AddFormation: function AddFormation() {\n      var _this = this;\n\n      if (!this.advalid_titre || !this.advalid_desc || !this.advalid_dated || !this.advalid_datef || !this.advalid_responsable || !this.advalid_nbr) return;\n      console.log(\"add\");\n      var fd = new FormData();\n      fd.append('titre', this.formation.titre);\n      fd.append('description', this.formation.description);\n      fd.append('date_debut', this.formation.date_debut == null ? this.formation.date_debut : new Date('Y-m-d', this.formation.date_debut));\n      fd.append('date_fin', this.formation.date_fin == null ? this.formation.date_fin : new Date('Y-m-d', this.formation.date_fin));\n      fd.append('responsable_id', this.formation.responsable_id);\n      fd.append('nbr_place', this.formation.nbr_place); //  console.log(\"in\");\n\n      axios({\n        url: 'http://127.0.0.1:8000/api/formation/store',\n        method: 'post',\n        data: this.formation\n      }).then(function (re) {\n        console.log(re);\n\n        _this.$bvModal.hide('add-modal');\n\n        _this.$emit('add-formation', re);\n      }).catch(function (err) {\n        _this.errors = err.response.data.errors;\n        console.log(\"erreurs chams\", _this.errors);\n      });\n    },\n    getutilisateurs: function getutilisateurs() {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return axios.get(\"http://127.0.0.1:8000/api/users\").then(function (response) {\n                  _this2.users = response.data;\n                }).catch(function (error) {\n                  return console.log(error.response);\n                });\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    },\n    resetModal: function resetModal() {\n      this.formation = {\n        'titre': null,\n        'nbr_place': null,\n        'description': null,\n        'date_debut': null,\n        'responsable_id': null,\n        'date_fin': null\n      };\n    },\n    handleOk: function handleOk(bvModalEvent) {\n      // Prevent modal from closing\n      bvModalEvent.preventDefault(); // Trigger submit handler\n\n      this.AddFormation();\n    }\n  },\n  computed: {\n    options: function options() {\n      var val = this.users;\n      var option = val.map(function (utilisateur) {\n        return {\n          text: utilisateur.ncin + \" / \" + utilisateur.nom + \" / \" + utilisateur.prenom,\n          value: utilisateur.id,\n          disabled: false\n        };\n      });\n      return option;\n    },\n    minf: function minf() {\n      var min = new Date(this.formation.date_debut);\n      if (this.formation.date_debut) min.setDate(min.getDate());\n      return this.formation.date_debut ? min : undefined;\n    },\n    mind: function mind() {\n      var min = new Date(this.today);\n      min.setMonth(min.getMonth() + 1);\n      return min;\n    },\n    maxd: function maxd() {\n      var max = new Date(this.formation.date_fin);\n      if (this.formation.date_fin) max.setDate(max.getDate());\n      return this.formation.date_fin ? max : undefined;\n    },\n    advalid_titre: function advalid_titre() {\n      if (this.formation.titre != undefined && this.formation.titre != \"\") return this.formation.titre.length >= 5 && this.formation.titre.length <= 15;\n      return false;\n    },\n    advalid_desc: function advalid_desc() {\n      if (this.formation.description != undefined) return this.formation.description.length <= 100;\n      return true;\n    },\n    advalid_datef: function advalid_datef() {\n      if (this.formation.date_fin != undefined && this.formation.date_fin != \"\") return true;\n      return false;\n    },\n    advalid_dated: function advalid_dated() {\n      if (this.formation.date_debut != undefined && this.formation.date_debut != \"\") return true;\n      return false;\n    },\n    advalid_responsable: function advalid_responsable() {\n      if (this.formation.responsable_id != undefined) return this.formation.responsable_id != null;\n      return false;\n    },\n    advalid_nbr: function advalid_nbr() {\n      if (this.formation.nbr_place != undefined) return this.formation.nbr_place >= 10 && this.formation.nbr_place <= 30;\n      return false;\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6HA;AACA;AACAA,sBADA;AAEAC;AACA;AACA;AACAC,uEADA;AAEAC,eAFA;AAGAC,gBAHA;AAIAC;AACA,qBADA;AAEA,yBAFA;AAGA,2BAHA;AAIA,0BAJA;AAKA,8BALA;AAMA;AANA;AAJA;AAaA,GAjBA;AAkBAC,SAlBA,qBAkBA;AACA;AACA,GApBA;AAqBAC;AACAC,gBADA,0BACA;AAAA;;AACA,qJACA;AACAC;AACA;AACAC;AACAA;AACAA;AACAA;AACAA;AACAA,uDAVA,CAYA;;AACAC;AACAC,wDADA;AAEAC,sBAFA;AAGAZ;AAHA,SAKAa,IALA,CAKA;AACAL;;AACA;;AAEA;AACA,OAVA,EAWAM,KAXA,CAWA;AACA;AACAN;AACA,OAdA;AAeA,KA7BA;AA8BAO,mBA9BA,6BA8BA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACAL,MACAM,GADA,CACA,iCADA,EAEAH,IAFA,CAEA;AACA;AACA,iBAJA,EAKAC,KALA,CAKA;AAAA;AAAA,iBALA,CADA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA,KArCA;AAsCAG,cAtCA,wBAsCA;AACA;AACA,qBADA;AAEA,yBAFA;AAGA,2BAHA;AAIA,0BAJA;AAKA,8BALA;AAMA;AANA;AAQA,KA/CA;AAgDAC,YAhDA,oBAgDAC,YAhDA,EAgDA;AACA;AACAA,oCAFA,CAGA;;AACA;AACA;AArDA,GArBA;AA4EAC;AACAC,WADA,qBACA;AACA;AAEA;AACA;AACAC,gBACAC,mBACA,KADA,GAEAA,eAFA,GAGA,KAHA,GAIAA,kBANA;AAOAC,+BAPA;AAQAC;AARA;AAUA,OAXA;AAYA;AACA,KAjBA;AAkBAC,QAlBA,kBAkBA;AACA;AACA;AACA;AACA,KAtBA;AAuBAC,QAvBA,kBAuBA;AACA;AACAC;AACA;AACA,KA3BA;AA4BAC,QA5BA,kBA4BA;AACA;AACA;AACA;AACA,KAhCA;AAiCAC,iBAjCA,2BAiCA;AACA,2EACA,OACA,qEADA;AAGA;AACA,KAvCA;AAwCAC,gBAxCA,0BAwCA;AACA,mDACA,OACA,wCADA;AAGA;AACA,KA9CA;AA+CAC,iBA/CA,2BA+CA;AACA,iFACA;AACA;AACA,KAnDA;AAoDAC,iBApDA,2BAoDA;AACA,qFACA;AACA;AACA,KAxDA;AAyDAC,uBAzDA,iCAyDA;AACA,sDACA;AACA;AACA,KA7DA;AA8DAC,eA9DA,yBA8DA;AACA,iDACA;AACA;AACA;AAlEA;AA5EA","names":["name","data","today","users","errors","formation","mounted","methods","AddFormation","console","fd","axios","url","method","then","catch","getutilisateurs","get","resetModal","handleOk","bvModalEvent","computed","options","text","utilisateur","value","disabled","minf","mind","min","maxd","advalid_titre","advalid_desc","advalid_datef","advalid_dated","advalid_responsable","advalid_nbr"],"sourceRoot":"src/components/formation","sources":["AddFormation.vue"],"sourcesContent":["<template>\r\n<b-modal  id=\"add-modal\" size=\"lg\"  centered @cancel=\"resetModal\" @ok=\"handleOk\" >\r\n \r\n  <div class=\"row d-flex justify-content-center\">\r\n    <div class=\"col-lg-9\">\r\n      <div class=\"card\">\r\n        <div class=\"card-header\"><strong>add</strong> Formation</div>\r\n        <form ref=\"my-modal1form\" @submit.stop.prevent=\"AddFormation\">\r\n          <div class=\"card-body card-block\">\r\n            <b-form-group label=\"titre formation\" :state=\"advalid_titre\">\r\n              <b-form-input\r\n                :state=\"advalid_titre\"\r\n                v-model=\"formation.titre\"\r\n                trim\r\n              ></b-form-input>\r\n              <!-- list=\"input-list\" <b-form-datalist id=\"input-list\" :options=\"options\"></b-form-datalist> -->\r\n              <b-form-invalid-feedback :state=\"advalid_titre\">\r\n                titre doit etre 5-15 caractere\r\n              </b-form-invalid-feedback>\r\n              <b-form-valid-feedback :state=\"advalid_titre\">\r\n                Looks Good.\r\n              </b-form-valid-feedback>\r\n            </b-form-group>\r\n    <b-form-group label=\"description formation\" :state=\"advalid_desc\">\r\n              <b-form-textarea\r\n              type=\"text\"\r\n               :state=\"advalid_desc\"\r\n                placeholder=\"merci d'expliquer un peu la formation...\"\r\n                v-model=\"formation.description\"\r\n                trim\r\n              ></b-form-textarea>\r\n              <!-- list=\"input-list\" <b-form-datalist id=\"input-list\" :options=\"options\"></b-form-datalist> -->\r\n              <b-form-invalid-feedback :state=\"advalid_desc\">\r\n                desc doit etre inferieur a  100 caractere\r\n              </b-form-invalid-feedback>\r\n              <b-form-valid-feedback :state=\"advalid_desc\">\r\n                Looks Good.\r\n              </b-form-valid-feedback>\r\n            </b-form-group>\r\n            <b-row>\r\n              <b-col>\r\n                <b-form-group\r\n                  label=\"date debut\"\r\n                  :state=\"advalid_dated\"\r\n                  label-for=\"input-2\"\r\n                >\r\n                  <b-form-datepicker\r\n                    :min=\"mind\"\r\n                    :max=\"maxd\"\r\n                    id=\"input-2\"\r\n                    reset-button\r\n                    class=\"mb-2 mr-sm-2 mb-sm-0\"\r\n                    v-model=\"formation.date_debut\"\r\n                    :state=\"advalid_dated\"\r\n                    require\r\n                    trim\r\n                  ></b-form-datepicker>\r\n                  <b-form-invalid-feedback :state=\"advalid_dated\">\r\n                    please enter a date\r\n                  </b-form-invalid-feedback>\r\n                  <b-form-valid-feedback :state=\"advalid_dated\">\r\n                    Looks Good.\r\n                  </b-form-valid-feedback>\r\n                </b-form-group>\r\n              </b-col>\r\n              <b-col>\r\n                <b-form-group\r\n                  :state=\"advalid_datef\"\r\n                  label=\"date fin\"\r\n                  label-for=\"input-3\"\r\n                >\r\n                  <b-form-datepicker\r\n                    :min=\"minf\"\r\n                    id=\"input-3\"\r\n                    reset-button\r\n                    :state=\"advalid_datef\"\r\n                    class=\"mb-2 mr-sm-2 mb-sm-0\"\r\n                    v-model=\"formation.date_fin\"\r\n                    require\r\n                    trim\r\n                  ></b-form-datepicker>\r\n\r\n                  <b-form-invalid-feedback :state=\"advalid_datef\">\r\n                    please enter a validate date\r\n                  </b-form-invalid-feedback>\r\n                  <b-form-valid-feedback :state=\"advalid_datef\">\r\n                    Looks Good.\r\n                  </b-form-valid-feedback>\r\n                </b-form-group>\r\n              </b-col>\r\n            </b-row>\r\n            <b-form-group label=\"responsable \" :state=\"advalid_responsable\">\r\n              <b-form-select :state=\"advalid_responsable\" \r\n                v-model=\"formation.responsable_id\"\r\n                :options=\"options\"\r\n              ><template #first>\r\n    <b-form-select-option  :value=\"null\" >ncin/   nom   /prenom</b-form-select-option>\r\n  </template></b-form-select>\r\n   <b-form-invalid-feedback :state=\"advalid_responsable\">\r\n                merci de choisir un responsable\r\n              </b-form-invalid-feedback>\r\n              <b-form-valid-feedback :state=\"advalid_responsable\">\r\n                Looks Good.\r\n              </b-form-valid-feedback>\r\n            </b-form-group>\r\n         \r\n            <b-form-group label=\"nombre de place\" :state=\"advalid_nbr\">\r\n              <b-form-input type=\"number\" v-model=\"formation.nbr_place\" trim :state=\"advalid_nbr\"></b-form-input>\r\n              <b-form-invalid-feedback :state=\"errors['nbr_place']\">\r\n                {{errors['nbr_place']}}\r\n              </b-form-invalid-feedback >\r\n              <b-form-invalid-feedback :state=\"advalid_nbr\">\r\n                nbr de place doit etre entre 10 et 30 \r\n              </b-form-invalid-feedback >\r\n              <b-form-valid-feedback :state=\"advalid_nbr\"> Looks Good. </b-form-valid-feedback>\r\n            </b-form-group>\r\n          </div>\r\n         \r\n        </form>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</b-modal>\r\n</template>\r\n<script>\r\nimport axios from \"axios\";\r\nexport default {\r\n  name: \"AddFormation\",\r\n  data: function () {\r\n    const now = new Date();\r\n    return {\r\n      today: new Date(now.getFullYear(), now.getMonth(), now.getDate()),\r\n      users: [],\r\nerrors:[],\r\n      formation: {\r\n        'titre':null,\r\n        'nbr_place':null,\r\n        'description':null,\r\n        'date_debut':null,\r\n        'responsable_id':null,\r\n        'date_fin':null,\r\n      },\r\n    };\r\n  },\r\n  mounted() {\r\n    this.getutilisateurs();\r\n  },\r\n  methods: {\r\n    AddFormation() {\r\n       if(!this.advalid_titre || !this.advalid_desc || !this.advalid_dated || !this.advalid_datef || !this.advalid_responsable || !this.advalid_nbr)\r\n       return ;\r\n      console.log(\"add\");\r\n            var fd = new FormData()\r\n          fd.append('titre', this.formation.titre);\r\n         fd.append('description', this.formation.description);\r\n         fd.append('date_debut',this.formation.date_debut==null?this.formation.date_debut:new Date('Y-m-d',this.formation.date_debut)) ;\r\n         fd.append('date_fin',this.formation.date_fin==null?this.formation.date_fin:new Date('Y-m-d', this.formation.date_fin) );\r\n         fd.append('responsable_id', this.formation.responsable_id);\r\n        fd.append('nbr_place', this.formation.nbr_place);\r\n         \r\n        //  console.log(\"in\");\r\n          axios({\r\n            url: 'http://127.0.0.1:8000/api/formation/store',\r\n            method: 'post',\r\n            data: this.formation\r\n          })\r\n          .then(re => {\r\n          console.log(re);\r\n          this.$bvModal.hide('add-modal')\r\n     \r\n  this.$emit('add-formation',re);\r\n          })\r\n          .catch(err => {\r\n            this.errors=err.response.data.errors;\r\n            console.log(\"erreurs chams\",this.errors);\r\n          })\r\n    },\r\n    async getutilisateurs() {\r\n      await axios\r\n        .get(\"http://127.0.0.1:8000/api/users\")\r\n        .then((response) => {\r\n          this.users = response.data;\r\n        })\r\n        .catch((error) => console.log(error.response));\r\n    },\r\n     resetModal() {\r\n      this.formation= {\r\n        'titre':null,\r\n        'nbr_place':null,\r\n        'description':null,\r\n        'date_debut':null,\r\n        'responsable_id':null,\r\n        'date_fin':null,\r\n      };\r\n      },\r\n      handleOk(bvModalEvent) {\r\n        // Prevent modal from closing\r\n        bvModalEvent.preventDefault()\r\n        // Trigger submit handler\r\n        this.AddFormation();\r\n      },\r\n  },\r\n  computed: {\r\n    options() {\r\n      var val = this.users;\r\n\r\n      var option = val.map(function (utilisateur) {\r\n        return {\r\n          text:\r\n            utilisateur.ncin +\r\n            \" / \" +\r\n            utilisateur.nom +\r\n            \" / \" +\r\n            utilisateur.prenom,\r\n          value: utilisateur.id,\r\n          disabled: false,\r\n        };\r\n      });\r\n      return option;\r\n    },\r\n    minf() {\r\n      const min = new Date(this.formation.date_debut);\r\n      if (this.formation.date_debut) min.setDate(min.getDate());\r\n      return this.formation.date_debut ? min : undefined;\r\n    },\r\n    mind() {\r\n      const min = new Date(this.today);\r\n      min.setMonth(min.getMonth() + 1);\r\n      return min;\r\n    },\r\n    maxd() {\r\n      const max = new Date(this.formation.date_fin);\r\n      if (this.formation.date_fin) max.setDate(max.getDate() );\r\n      return this.formation.date_fin ? max : undefined;\r\n    },\r\n    advalid_titre() {\r\n      if (this.formation.titre != undefined  && this.formation.titre != \"\")\r\n        return (\r\n          this.formation.titre.length >= 5 && this.formation.titre.length <= 15\r\n        );\r\n      return false;\r\n    },\r\n    advalid_desc(){\r\n       if (this.formation.description != undefined )\r\n        return (\r\n          this.formation.description.length <=100\r\n        );\r\n      return true;\r\n    },\r\n    advalid_datef() {\r\n      if (this.formation.date_fin != undefined && this.formation.date_fin != \"\")\r\n        return true;\r\n      return false;\r\n    },\r\n    advalid_dated() {\r\n      if (this.formation.date_debut != undefined && this.formation.date_debut != \"\")\r\n        return true;\r\n      return false;\r\n    },\r\n    advalid_responsable() {\r\n      if (this.formation.responsable_id != undefined )\r\n       return this.formation.responsable_id!=null;\r\n      return false;\r\n    },\r\n    advalid_nbr(){\r\n  if (this.formation.nbr_place != undefined)\r\n  return this.formation.nbr_place>=10 &&this.formation.nbr_place<=30\r\n  return false\r\n    },\r\n  },\r\n};\r\n</script>"]},"metadata":{},"sourceType":"module"}
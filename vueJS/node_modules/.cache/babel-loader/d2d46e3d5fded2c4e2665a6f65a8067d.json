{"ast":null,"code":"import _asyncToGenerator from \"D:/safe_dsi21/dsi21/semestre2/PROJET_2/projet/vueJS/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"regenerator-runtime/runtime.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from \"axios\";\nimport ListerFormation from '../../components/formation/ListerFormation.vue'; //import ArchiverItem from \"@/components/ArchiverItem\";\n//import afficherDemandes from \"@/components/demande/afficherDemandes.vue\";\n\nexport default {\n  name: \"FormationsView\",\n  components: {\n    //  ArchiverItem,\n    ListerFormation: ListerFormation\n  },\n  data: function data() {\n    return {\n      dismissSecs: 10,\n      dismissCountDown: 0,\n      formations: [],\n      titreform: ''\n    };\n  },\n  computed: {\n    role: function role() {\n      return this.$route.params.role;\n    }\n  },\n  watch: {\n    role: function role() {\n      this.getformations();\n    }\n  },\n  mounted: function mounted() {\n    this.getformations();\n  },\n  methods: {\n    getformations: function getformations() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return axios.get(\"http://127.0.0.1:8000/api/\" + _this.role + \"/formations\").then(function (response) {\n                  _this.formations = response.data;\n                }).catch(function (error) {\n                  return console.log(error.response);\n                });\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    },\n    countDownChanged: function countDownChanged(dismissCountDown) {\n      this.dismissCountDown = dismissCountDown;\n    },\n    showAlert: function showAlert() {\n      this.dismissCountDown = this.dismissSecs;\n    },\n    Addformation: function Addformation(formation) {\n      if (formation != 'none') {\n        this.titreform = formation.data.titre;\n        this.showAlert();\n      }\n\n      console.log(formation);\n      this.getformations();\n    },\n    onAddClick: function onAddClick() {\n      this.formation = {};\n      console.log(this.formation);\n      this.showModal(\"my-modal\");\n    },\n    showModal: function showModal(id) {\n      this.$bvModal.show(id); // this.$refs[id].show()\n    },\n    hideModal: function hideModal(id) {\n      this.$bvModal.hide(id); // this.$refs[id].show()\n    },\n    deleteitm: function deleteitm(id) {\n      var _this2 = this;\n\n      axios.delete(\"http://127.0.0.1:8000/api/formation/\" + id).then(function (response) {\n        if (response.data == true) _this2.getformations();\n      }).catch(function (error) {\n        return console.log(error.response);\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;AAEA,6E,CAEA;AACA;;AAQA;AACAA,wBADA;AAEAC;AACA;AAKAC;AANA,GAFA;AAWAC;AACA;AAEAC,qBAFA;AAGAC,yBAHA;AAKAC,oBALA;AAMAC;AANA;AASA,GArBA;AAsBAC;AACAC,QADA,kBACA;AACA;AACA;AAHA,GAtBA;AA2BAC;AACAD;AACA;AACA;AAHA,GA3BA;AAiCAE,SAjCA,qBAiCA;AACA;AACA,GAnCA;AAoCAC;AACAC,iBADA,2BACA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEAC,MACAC,GADA,CACA,yDADA,EAEAC,IAFA,CAEA;AACA;AACA,iBAJA,EAKAC,KALA,CAKA;AAAA;AAAA,iBALA,CAFA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA,KATA;AAUAC,oBAVA,4BAUAb,gBAVA,EAUA;AACA;AACA,KAZA;AAaAc,aAbA,uBAaA;AACA;AACA,KAfA;AAgBAC,gBAhBA,wBAgBAC,SAhBA,EAgBA;AACA;AACA;AACA;AACA;;AACAC;AACA;AAEA,KAxBA;AAyBAC,cAzBA,wBAyBA;AACA;AACAD;AACA;AACA,KA7BA;AA8BAE,aA9BA,qBA8BAC,EA9BA,EA8BA;AACA,6BADA,CAEA;AACA,KAjCA;AAiCAC,aAjCA,qBAiCAD,EAjCA,EAiCA;AACA,6BADA,CAEA;AACA,KApCA;AAuCAE,aAvCA,qBAuCAF,EAvCA,EAuCA;AAAA;;AACAX,YACAc,MADA,CACA,2CADA,EAEAZ,IAFA,CAEA;AACA;AACA,OAJA,EAKAC,KALA,CAKA;AAAA;AAAA,OALA;AAMA;AA9CA;AApCA","names":["name","components","ListerFormation","data","dismissSecs","dismissCountDown","formations","titreform","computed","role","watch","mounted","methods","getformations","axios","get","then","catch","countDownChanged","showAlert","Addformation","formation","console","onAddClick","showModal","id","hideModal","deleteitm","delete"],"sourceRoot":"src/views/formation","sources":["FormationsView.vue"],"sourcesContent":["<template>\r\n  <div id=\"app\"  class=\"container \">\r\n    <h1 class=\"text-center\">formation</h1>\r\n    <b-alert\r\n      :show=\"dismissCountDown\"\r\n      dismissible\r\n      variant=\"info\"\r\n      @dismissed=\"dismissCountDown=0\"\r\n\r\n      @dismiss-count-down=\"countDownChanged\"\r\n    >\r\n    <h6 aria-describedby=\"help-block\"> le formation {{titreform}} est ajouter ou modiffier avec success </h6>\r\n\r\n      <b-form-text id=\"help-block\">This alert will dismiss after {{ dismissCountDown }} seconds...</b-form-text>\r\n      <b-progress\r\n        variant=\"info\"\r\n        :max=\"dismissSecs\"\r\n        :value=\"dismissCountDown\"\r\n        height=\"4px\"\r\n      ></b-progress>\r\n    </b-alert>\r\n   <lister-formation :formations=\"formations\" @add-formation=\"Addformation\" :role=\"role\"/>\r\n   \r\n   \r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\n\r\nimport ListerFormation from '../../components/formation/ListerFormation.vue';\r\n\r\n//import ArchiverItem from \"@/components/ArchiverItem\";\r\n//import afficherDemandes from \"@/components/demande/afficherDemandes.vue\";\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport default {\r\n  name: \"FormationsView\",\r\n  components: {\r\n    //  ArchiverItem,\r\n\r\n\r\n   \r\n \r\n    ListerFormation,\r\n\r\n  },\r\n  data: function () {\r\n    return {\r\n   \r\n dismissSecs: 10,\r\n        dismissCountDown: 0,\r\n\r\n      formations: [],\r\n      titreform:'',\r\n   \r\n    };\r\n  },\r\n  computed:{\r\nrole(){\r\n  return this.$route.params.role;\r\n},\r\n  },\r\nwatch: {\r\n role:function () {\r\n  this.getformations();\r\n }\r\n},\r\n \r\n  mounted() {\r\n    this.getformations();\r\n  },\r\n  methods: {\r\n    async getformations() {\r\n  \r\n await  axios\r\n        .get(\"http://127.0.0.1:8000/api/\"+this.role+\"/formations\")\r\n        .then((response) => {\r\n          this.formations = response.data;\r\n        })\r\n        .catch((error) => console.log(error.response));\r\n    },\r\n     countDownChanged(dismissCountDown) {\r\n        this.dismissCountDown = dismissCountDown\r\n      },\r\n      showAlert() {\r\n        this.dismissCountDown = this.dismissSecs\r\n      },\r\n  Addformation(formation){\r\n    if(formation!='none'){\r\n    this.titreform=formation.data.titre;\r\nthis.showAlert();\r\n}\r\nconsole.log(formation);\r\nthis.getformations();\r\n\r\n  },\r\n    onAddClick() {\r\n      this.formation = {};\r\n      console.log(this.formation);\r\n      this.showModal(\"my-modal\");\r\n    },\r\n    showModal(id) {\r\n      this.$bvModal.show(id);\r\n      // this.$refs[id].show()\r\n    }, hideModal(id) {\r\n      this.$bvModal.hide(id);\r\n      // this.$refs[id].show()\r\n    },\r\n  \r\n   \r\n    deleteitm(id) {\r\n      axios\r\n        .delete(\"http://127.0.0.1:8000/api/formation/\" + id)\r\n        .then((response) => {\r\n          if (response.data == true) this.getformations();\r\n        })\r\n        .catch((error) => console.log(error.response));\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n@import \"~material-design-icons-iconfont/dist/material-design-icons\";\r\n\r\n.formation {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    height: 100%;\r\n    width: 100%;\r\n    font-size: 40px;\r\n    color: rgb(167, 167, 167);\r\n    font-weight: 600;\r\n}\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}